import{o as t,c as e,i as o,r as s,s as a,a as n,w as r,n as i,b as l,d as c,t as d,e as m,f as h}from"./index-9fed9865.js";import{_ as T}from"./plugin-vueexport-helper.1b428a4d.js";const u=T({data:()=>({TSCText:"00:00",TSCcolor:"#ffaa00"}),onLoad(){s({url:"https://tscmonitorkv.msktmi.com/get",data:{key:"misregistration"},success:t=>{a.state.countdown.misregistration=t.data,a.commit("setCountdown",a.state.countdown)}})},methods:{getInterval(t,e){const o=new Date;o.setHours(0,0,0,0),o.setDate(o.getDate()-1),o.setSeconds(e);const s=t-(Date.now()-o.getTime())/1e3%t;s<180?(n({title:"红灯"}),this.TSCText=this.SecondToTimeStr(s),this.TSCcolor="#e43d33"):(n({title:"绿灯"}),this.TSCText=this.SecondToTimeStr(s-a.state.countdown.redLight),this.TSCcolor="#18bc37")},SecondToTimeStr(t){const e=Math.floor(t/60),o=Math.floor(t%60);return`${e.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},timeup(){this.getInterval(a.getters.interval,a.state.countdown.misregistration)}},components:{ElTimer:T({name:"ElTimer",props:["interval"],data:()=>({theInterval:null}),methods:{doTimer(){this.$emit("tick")}},mounted(){this.theInterval=setInterval(this.doTimer,this.interval)},beforeDestroy(){clearInterval(this.theInterval)},watch:{interval:function(t){clearInterval(this.theInterval),setInterval(this.doTimer(),t)}}},[["render",function(s,a,n,r,i,l){const c=o;return t(),e(c,{style:{display:"none"}})}]])}},[["render",function(s,a,n,T,u,S){const v=m,p=h("el-timer"),f=o;return t(),e(f,{class:"container",style:i({color:u.TSCcolor})},{default:r((()=>[l(v,null,{default:r((()=>[c(d(u.TSCText),1)])),_:1}),l(p,{interval:1e3,onTick:S.timeup},null,8,["onTick"])])),_:1},8,["style"])}],["__scopeId","data-v-76998adb"]]);export{u as default};
